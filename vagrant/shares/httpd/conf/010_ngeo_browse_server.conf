<VirtualHost *:443>

    #   SSL Engine Switch:
    #   Enable/Disable SSL for this virtual host.
    SSLEngine on
    
    #   SSL Protocol support:
    # List the enable protocol levels with which clients will be able to
    # connect.  Disable SSLv2 access by default:
    SSLProtocol all -SSLv2
    
    #   SSL Cipher Suite:
    # List the ciphers that the client is permitted to negotiate.
    # See the mod_ssl documentation for a complete list.
    SSLCipherSuite ALL:!ADH:!EXPORT:!SSLv2:RC4+RSA:+HIGH:+MEDIUM:+LOW
    
    #   Server Certificate:
    # Point SSLCertificateFile at a PEM encoded certificate.  If
    # the certificate is encrypted, then you will be prompted for a
    # pass phrase.  Note that a kill -HUP will prompt again.  A new
    # certificate can be generated using the genkey(1) command.
    SSLCertificateFile /etc/pki/tls/certs/localhost.crt
    
    #   Server Private Key:
    #   If the key is not combined with the certificate, use this
    #   directive to point at the key file.  Keep in mind that if
    #   you've both a RSA and a DSA private key you can configure
    #   both in parallel (to also allow the use of DSA ciphers, etc.)
    SSLCertificateKeyFile /etc/pki/tls/private/localhost.key


    ServerName localhost
    ServerAdmin webmaster@eox.at

    DocumentRoot /var/ngeob_autotest
    <Directory "/var/ngeob_autotest">
            Options Indexes FollowSymLinks
            AllowOverride None
            Order Deny,Allow
            Deny from all
    </Directory>

    Alias /static "/var/ngeob_autotest/static"
    Alias /browse "/var/ngeob_autotest/wsgi.py"

    WSGIDaemonProcess ngeob processes=10 threads=1
    <Directory "/var/ngeob_autotest">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        AddHandler wsgi-script .py
        WSGIProcessGroup ngeob
        Order Allow,Deny
        Allow from all
    </Directory>

    LoadModule mapcache_module modules/mod_mapcache.so
    MapCacheAlias /c "/var/www/cache/mapcache.xml"
    <Directory /var/www/cache>
        Order Allow,Deny
        Allow from all
        Header set Access-Control-Allow-Origin *
    </Directory>

    DavLockDB "/var/www/dav/DavLock"
    Alias /store "/var/www/store"
    <Directory /var/www/store>
        Order Allow,Deny
        Allow from all
        Dav On
        Options +Indexes

        AuthType Digest
        AuthName "ngEO Browse Server"
        AuthDigestDomain /store http://localhost:3080/store
        AuthDigestProvider file
        AuthUserFile "/var/www/dav/DavUsers"
        Require valid-user
    </Directory>
    <Directory /var/www/dav>
        Order Allow,Deny
        Deny from all
    </Directory>
</VirtualHost>